"use strict";(self.webpackChunkpersonal_website=self.webpackChunkpersonal_website||[]).push([[6603],{3258:(n,e,l)=>{l.r(e),l.d(e,{assets:()=>t,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"notes/Development/article02","title":"Install OpenWebUI and ollama in Host (Anaconda)","description":"0. Environment","source":"@site/docs/notes/Development/article02.md","sourceDirName":"notes/Development","slug":"/notes/Development/article02","permalink":"/Personal-Website/docs/notes/Development/article02","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/notes/Development/article02.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Install OpenWebUI with ollama by docker","permalink":"/Personal-Website/docs/notes/Development/article01"},"next":{"title":"Install Flarum (v1.8.1)","permalink":"/Personal-Website/docs/notes/Development/article03"}}');var i=l(4848),a=l(8453);const r={sidebar_position:2},o="Install OpenWebUI and ollama in Host (Anaconda)",t={},c=[{value:"0. Environment",id:"0-environment",level:3},{value:"1. Install Node.js (Version &gt;= 20.10)",id:"1-install-nodejs-version--2010",level:3},{value:"2.Install Anaconda",id:"2install-anaconda",level:3},{value:"3.Install OpenWebUI (Front-end)",id:"3install-openwebui-front-end",level:3},{value:"4.Install OpenWebUI (Back-end)",id:"4install-openwebui-back-end",level:3},{value:"5. Install ollama",id:"5-install-ollama",level:3}];function d(n){const e={a:"a",code:"code",h1:"h1",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"install-openwebui-and-ollama-in-host-anaconda",children:"Install OpenWebUI and ollama in Host (Anaconda)"})}),"\n",(0,i.jsx)(e.h3,{id:"0-environment",children:"0. Environment"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"This method works in OpenWebUI version 0.3.31"}),"\n",(0,i.jsx)(e.li,{children:"Prepare an environment w/ Nvidia GPU (ofc you can run OpenWebUI on CPU w/o GPU support)."}),"\n",(0,i.jsx)(e.li,{children:"In my case, I built OpenWebUI w/ ollama 3 on a Nvidia 4070 GPU support in VMware (Ubuntu 22.04)."}),"\n",(0,i.jsx)(e.li,{children:"I also built w/o GPU. It works, but slow."}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"1-install-nodejs-version--2010",children:"1. Install Node.js (Version >= 20.10)"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"installs nvm (Node Version Manager)"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | bash\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"download and install Node.js (you may need to restart the terminal)"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"nvm install 22.17\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"verifies the right Node.js version is in the environment"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"node -v # should print `v20.16.0`\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"verifies the right npm version is in the environment"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"npm -v # should print `10.8.1`\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["more info\r\n",(0,i.jsx)(e.a,{href:"https://nodejs.org/en/download/package-manager",children:"https://nodejs.org/en/download/package-manager"})]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"2install-anaconda",children:"2.Install Anaconda"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"To run OpenWebUI, Python 3.11 is needed to avoid unpredictable issues. (Python 3.10 is too old, and 3.12 is too new), The default settings in Anaconda(2023.09) is Python 3.11 w/ pip 23.2.1 (Python 3.11)"}),"\n",(0,i.jsx)(e.li,{children:"Get and install Anaconda by debian"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"sudo apt-get install -y libgl1-mesa-glx libegl1-mesa libxrandr2 libxrandr2 libxss1 libxcursor1 libxcomposite1 libasound2 libxi6 libxtst6\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["Download installer\r\n_ Check version: ",(0,i.jsx)(e.a,{href:"https://repo.anaconda.com/archive/",children:"https://repo.anaconda.com/archive/"}),"\r\n_ Ctrl + F Search: Linux-x86_64.sh\r\n",(0,i.jsx)(e.img,{src:"https://hackmd.io/_uploads/H1fTYRn0R.png",alt:"image"})]}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"# If you decide to use Anaconda3-2023.09-0-Linux-x86_64.sh\r\n# Replace <INSTALLER_VERSION> by 2023.09-0\r\n# e.g. curl -O https://repo.anaconda.com/archive/Anaconda3-2023.09-0-Linux-x86_64.sh\r\ncurl -O https://repo.anaconda.com/archive/Anaconda3-<INSTALLER_VERSION>-Linux-x86_64.sh\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Execute installer"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"bash Anaconda3-<INSTALLER_VERSION>-Linux-x86_64.sh\r\n\r\n# Please, press ENTER to continue\r\n# >>>\r\n\r\n# Do you accept the license terms? [yes|no]\r\n# [no] >>> yes\r\n\r\n# Anaconda3 will now be installed into this location:\r\n# /home/.../anaconda3\r\n\r\n# You can undo this by running `conda init --reverse $SHELL`? [yes|no]\r\n# [no] >>> yes\r\n\r\n# Anaconda recommends you enter \u201cyes\u201d to initialize Anaconda Distribution by running conda init.\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"The installer finishes and displays, \u201cThank you for installing Anaconda3!\u201d"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Refresh terminal"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"source ~/.bashrc\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://hackmd.io/_uploads/rk7CByTAR.png",alt:"image"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Update conda pack"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"conda update backports\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"basic command"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"# Switch back to ubuntu env (leave Anaconda env)\r\nconda deactivate\r\n\r\n# Use default Anaconda env\r\nconda activate\r\n\r\n# Auto-activate Anaconda env\r\nconda config --set auto_activate_base true\r\n\r\n# Disable auto-activate Anaconda env\r\nconda config --set auto_activate_base false\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["more info\r\n",(0,i.jsx)(e.a,{href:"https://docs.anaconda.com/anaconda/install/linux/",children:"https://docs.anaconda.com/anaconda/install/linux/"})]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"3install-openwebui-front-end",children:"3.Install OpenWebUI (Front-end)"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Download OenpWebUI pack"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"git clone https://github.com/open-webui/open-webui.git\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Enter open-webui folder"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"cd open-webui/\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Install OpenWebUI front-end"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'npm install\r\nnpm run build\r\n# A new folder "build" will be created if success\n'})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:'p.s. if you meet the issue "JavaScript heap out of memory", edit package.json file and replace "build" line as below:'}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'"build": "npm run pyodide:fetch && NODE_OPTIONS=\'--max-old-space-size=4096\' vite build"\n'})}),"\n",(0,i.jsx)(e.h3,{id:"4install-openwebui-back-end",children:"4.Install OpenWebUI (Back-end)"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"If you are in open-webui/"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"cd ./backend\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Install dependencies"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"pip install -r requirements.txt -U\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Start the application"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"bash start.sh\r\n# if OpenWebUI successfully ran in host, check http://localhost:8080\r\n# e.g. http://10.15.1.82:8080\n"})}),"\n",(0,i.jsx)(e.h3,{id:"5-install-ollama",children:"5. Install ollama"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"curl -fsSL https://ollama.com/install.sh | sh\n"})})]})}function h(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(d,{...n})}):d(n)}},8453:(n,e,l)=>{l.d(e,{R:()=>r,x:()=>o});var s=l(6540);const i={},a=s.createContext(i);function r(n){const e=s.useContext(a);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:r(n.components),s.createElement(a.Provider,{value:e},n.children)}}}]);